## 主从复制
* 全量同步，当slave刚链接master时，需要master做rdbSave，同步全量数据
* 增量同步，slave正常链接时，将写入，key过期或逐出等同步
* 如果断开链接中间的能通过增量更新则增量，不能则全量
* 可以做读写分离
## 哨兵
* 监控master节点，当master不可用的时候选择新的master，并修改其他节点指向master
* 哨兵也是集群
* 监控，监控主从是否正常
* 提醒，有问题时，通过API向其他进程发消息
* 故障迁移，主挂了之后，将其他slave升级成master，并修改其他节点指向master，集群也会向客户端返回新的主节点地址
* 网络分区仍然会有脑裂问题
## 集群(分片)
* 采用虚拟slot分区(CRC16[key] & 16383)覆盖到所有节点，节点之间使用Gossip(meet消息)协议
* 每个master也需要配置slave和哨兵模式
* 一个master不可用就会进入fail状态，因为slot不可用
* 如果访问的key不在该节点，客户端会收到moved消息
* 0-5460-->node1,5461-10922-->node2,10923-16383-->node3
* moved指槽已经确定迁移，即槽不在当前节点。ask表示槽还在迁移中
* 添加，删除节点时需要做数据迁移

