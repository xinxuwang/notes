## HTTP1.x局限
* HTTP1单个tcp只能用于一个http请求，响应，短链接
* HTTP1.1是一个tcp分时的被多个http请求，响应，一个一个排队处理，长链接，也就有了链接池
* 浏览器对同一个域名的并发链接有限制
* 无状态，导致HEADER没法共享且长度很大
* 不支持服务器推送，导致poll，long-poll，web-socket技术
* 字符传输，编码不高效
## HTTP2特性
#### 二进制分帧
* 帧:就是frame，8字节头部
* 消息:逻辑上的HTTP消息，由一个或多个帧组成
* 流:标识了逻辑上的一次HTTP，可以承载双向消息
* 使用了二进制编码，HTTP1.x的header信息封装到header帧中，而请求body封装在Data帧中
#### 首部压缩
* 客户端，服务端之间使用首部表来跟踪和存储之前发送的键值对
* 每个stream只需要发送差量和变量数据
* 报文更加紧凑，减少了数据发送量，网络拥塞得到改善
#### 流量控制
* 因为使用了流来做多路复用，所以也引入了多个流对tcp的争夺，会造成流被阻塞
* 流控确保多个流在同一条链接上不会造成破坏性的干扰
* 用于各个独立流，也可以用于整个链接
* 通过WINDOW_UPDATE帧来进行流控
#### 多路复用
* 基于帧和流，可以并行的交错发送请求和响应而互不影响
* 一个tcp链接就可以并行发送多个HTTP消息
#### 请求优先级
* 每个stream可以带有一个31bit的优先级，0表示最高
* 要注意高优先级的慢请求阻塞队首
#### 服务器推送
* 必须遵循请求-响应原则，只能借着对请求的响应推送资源
* 同源策略，不能随便推送
